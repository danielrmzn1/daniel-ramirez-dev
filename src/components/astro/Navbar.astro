---
const links = [
  { href: '/', label: 'Home' },
  { href: '/about', label: 'About' },
  { href: '/projects', label: 'Projects' },
  { href: '/contact', label: 'Contact' },
];
---

<header class="navbar bg-base-100/80 backdrop-blur-md sticky top-0 z-50 px-4 md:px-8 border-b border-base-200">
  <div class="navbar-start w-full lg:w-auto flex justify-between lg:justify-start">
    <a href="/" class="text-xl font-black tracking-tighter hover:text-primary transition-colors">
      DANIEL<span class="text-primary opacity-50">.</span>RAMIREZ
    </a>
    
    <!-- Mobile Menu Button -->
    <button 
      id="mobile-menu-btn"
      class="btn btn-ghost btn-sm lg:hidden hover:bg-primary/10 transition-colors" 
      aria-label="Toggle navigation menu"
      aria-expanded="false"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>
  
  <div class="navbar-center hidden lg:flex">
    <ul class="menu menu-horizontal px-1 gap-1">
      {links.map(link => (
        <li>
          <a 
            href={link.href} 
            class="rounded-lg px-4 py-2 font-medium hover:bg-primary/5 hover:text-primary transition-colors"
          >
            {link.label}
          </a>
        </li>
      ))}
    </ul>
  </div>

  <div class="navbar-end gap-2 hidden lg:flex">
    <slot name="right" />
  </div>

  <!-- Mobile Full Width Menu Overlay -->
  <div 
    id="mobile-menu"
    class="fixed inset-x-0 top-[65px] bg-base-100/95 backdrop-blur-xl border-b border-base-200 shadow-2xl transition-all duration-300 ease-in-out opacity-0 translate-y-[-10px] pointer-events-none lg:hidden"
    style="height: 0; overflow: hidden;"
  >
    <div class="p-4 flex flex-col gap-2">
      {links.map(link => (
        <a 
          href={link.href} 
          class="flex items-center justify-between p-4 rounded-xl hover:bg-primary/5 hover:text-primary active:bg-primary/10 transition-all font-bold text-lg group"
        >
          {link.label}
          <span class="opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all text-sm">â†’</span>
        </a>
      ))}
      <div class="divider my-2"></div>
      <div class="flex justify-between items-center p-4">
        <span class="text-sm font-medium text-base-content/60">Appearance</span>
        <slot name="right" />
      </div>
    </div>
  </div>
</header>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  let isMenuOpen = false;

  if (menuBtn && mobileMenu) {
    menuBtn.addEventListener('click', () => {
      isMenuOpen = !isMenuOpen;
      
      // Update ARIA
      menuBtn.setAttribute('aria-expanded', isMenuOpen.toString());
      
      if (isMenuOpen) {
        // Open Menu
        mobileMenu.style.height = 'auto'; // allow expansion
        mobileMenu.classList.remove('opacity-0', 'translate-y-[-10px]', 'pointer-events-none');
        // Icon change (optional, could toggle classes on SVG)
        menuBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12" /></svg>`;
      } else {
        // Close Menu
        mobileMenu.style.height = '0';
        mobileMenu.classList.add('opacity-0', 'translate-y-[-10px]', 'pointer-events-none');
        // Reset Icon
        menuBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16" /></svg>`;
      }
    });

    // Close menu when clicking a link
    const mobileLinks = mobileMenu.querySelectorAll('a');
    mobileLinks.forEach(link => {
      link.addEventListener('click', () => {
        isMenuOpen = false;
        menuBtn.setAttribute('aria-expanded', 'false');
        mobileMenu.style.height = '0';
        mobileMenu.classList.add('opacity-0', 'translate-y-[-10px]', 'pointer-events-none');
        menuBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16" /></svg>`;
      });
    });
  }
</script>

